version: 0.1

env: 
  secrets-manager: 
    DB_USER: "db_creds:mysql_user"
    DB_PASSWORD: "db_creds:mysql_password"
    DB_DATABASE: "db_creds:mysql_database"
    DB_ENDPOINT: "db_creds:mysql_endpoint"
phases:
  build:
    commands:
      - echo Build started on `date`
      - mvn test
  post_build:
    commands:
      - echo Build completed on `date`
      - mvn clean package
      - echo "db user is $DB_USER"
artifacts:
  files:
    - target/SpringDataTest-0.0.1-SNAPSHOT.jar

